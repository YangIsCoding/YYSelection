# è³‡æ–™åº«åŒæ­¥æŒ‡å—

æœ¬å°ˆæ¡ˆæ”¯æ´åœ¨ **Neon PostgreSQL é›²ç«¯è³‡æ–™åº«** å’Œ **æœ¬åœ° SQLite è³‡æ–™åº«** ä¹‹é–“é€²è¡ŒåŒæ­¥ã€‚

## ğŸ¯ ä½¿ç”¨æƒ…å¢ƒ

- **é–‹ç™¼éšæ®µ**ï¼šä½¿ç”¨æœ¬åœ° SQLite é€²è¡Œå¿«é€Ÿé–‹ç™¼å’Œæ¸¬è©¦
- **ç”Ÿç”¢éšæ®µ**ï¼šä½¿ç”¨ Neon PostgreSQL æä¾›ç©©å®šçš„é›²ç«¯æœå‹™
- **è³‡æ–™åŒæ­¥**ï¼šåœ¨å…©å€‹ç’°å¢ƒä¹‹é–“ä¿æŒè³‡æ–™ä¸€è‡´æ€§

## ğŸ“‹ å¯ç”¨æŒ‡ä»¤

### åŸºæœ¬åŒæ­¥æ“ä½œ

```bash
# æª¢æŸ¥å…©å€‹è³‡æ–™åº«çš„ç‹€æ…‹å’Œå·®ç•°
npm run db:sync:status

# å¾ Neon æ‹‰å–è³‡æ–™åˆ°æœ¬åœ° SQLite
npm run db:sync:pull

# å¾æœ¬åœ° SQLite æ¨é€è³‡æ–™åˆ° Neon
npm run db:sync:push
```

### æœ¬åœ°ç’°å¢ƒè¨­ç½®

```bash
# è¨­ç½®æœ¬åœ° SQLite è³‡æ–™åº«
npm run db:setup:local

# é‡ç½®æœ¬åœ°è³‡æ–™åº«ï¼ˆæ¸…ç©ºä¸¦é‡å»ºï¼‰
npm run db:reset:local

# å®Œæ•´çš„æœ¬åœ°é–‹ç™¼ç’°å¢ƒå•Ÿå‹•
npm run dev:local
```

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. è¨­ç½®æœ¬åœ°é–‹ç™¼ç’°å¢ƒ

```bash
# 1. è¤‡è£½ç’°å¢ƒè¨­å®šç¯„ä¾‹
cp .env.local.example .env.local

# 2. ç·¨è¼¯ .env.localï¼Œè¨­å®šæœ¬åœ°è³‡æ–™åº«é€£æ¥
# DATABASE_URL="file:./prisma/dev.db"

# 3. è¨­ç½®æœ¬åœ°è³‡æ–™åº«
npm run db:setup:local

# 4. å¾ Neon åŒæ­¥è³‡æ–™åˆ°æœ¬åœ°
npm run db:sync:pull

# 5. å•Ÿå‹•æœ¬åœ°é–‹ç™¼æœå‹™å™¨
npm run dev
```

### 2. æª¢æŸ¥åŒæ­¥ç‹€æ…‹

```bash
npm run db:sync:status
```

è¼¸å‡ºç¯„ä¾‹ï¼š
```
ğŸ” æª¢æŸ¥è³‡æ–™åº«ç‹€æ…‹...

ğŸ“Š Neon PostgreSQL è³‡æ–™åº«:
   ğŸ‘¤ users: 5
   ğŸ“¦ products: 6
   ğŸ›’ orders: 2
   â­ reviews: 3
   â¤ï¸ wishlists: 4

ğŸ“Š æœ¬åœ° SQLite è³‡æ–™åº«:
   ğŸ‘¤ users: 5
   ğŸ“¦ products: 6
   ğŸ›’ orders: 2
   â­ reviews: 0
   â¤ï¸ wishlists: 0

ğŸ“ˆ åŒæ­¥ç‹€æ…‹æ¯”è¼ƒ:
   âœ… ğŸ‘¤ users: å·²åŒæ­¥ (5)
   âœ… ğŸ“¦ products: å·²åŒæ­¥ (6)
   âœ… ğŸ›’ orders: å·²åŒæ­¥ (2)
   â¬†ï¸  â­ reviews: Neon å¤š 3 ç­†
   â¬†ï¸  â¤ï¸ wishlists: Neon å¤š 4 ç­†
```

## ğŸ”„ åŒæ­¥ç­–ç•¥

### å¾é›²ç«¯åˆ°æœ¬åœ° (Pull)
é©ç”¨æ–¼ï¼š
- åˆå§‹åŒ–æœ¬åœ°é–‹ç™¼ç’°å¢ƒ
- ç²å–æœ€æ–°çš„ç”Ÿç”¢è³‡æ–™
- é‡ç½®æœ¬åœ°ç’°å¢ƒ

```bash
npm run db:sync:pull
```

### å¾æœ¬åœ°åˆ°é›²ç«¯ (Push)
é©ç”¨æ–¼ï¼š
- å°‡æœ¬åœ°é–‹ç™¼çš„è³‡æ–™æ¨é€åˆ°ç”Ÿç”¢ç’°å¢ƒ
- å‚™ä»½æœ¬åœ°è³‡æ–™

```bash
npm run db:sync:push
```

âš ï¸ **æ³¨æ„**: Push æ“ä½œæœƒè¦†è“‹é›²ç«¯è³‡æ–™åº«çš„æ‰€æœ‰è³‡æ–™ï¼

## ğŸ“ æª”æ¡ˆçµæ§‹

```
scripts/
â”œâ”€â”€ db-sync.ts      # ä¸»è¦åŒæ­¥é‚è¼¯
â””â”€â”€ db-status.ts    # ç‹€æ…‹æª¢æŸ¥å·¥å…·

.env                # ç”Ÿç”¢ç’°å¢ƒè¨­å®š (Neon)
.env.local          # æœ¬åœ°é–‹ç™¼ç’°å¢ƒè¨­å®š (SQLite)
.env.local.example  # æœ¬åœ°ç’°å¢ƒè¨­å®šç¯„ä¾‹
```

## ğŸ› ï¸ ç’°å¢ƒåˆ‡æ›

### ä½¿ç”¨é›²ç«¯è³‡æ–™åº« (Neon)
```bash
# ä½¿ç”¨ .env æª”æ¡ˆ (é è¨­)
npm run dev
```

### ä½¿ç”¨æœ¬åœ°è³‡æ–™åº« (SQLite)
```bash
# è¨­ç½® .env.local æª”æ¡ˆ
cp .env.local.example .env.local
npm run dev
```

## âš ï¸ æ³¨æ„äº‹é …

1. **è³‡æ–™å®‰å…¨**: Push æ“ä½œæœƒå®Œå…¨è¦†è“‹ç›®æ¨™è³‡æ–™åº«ï¼Œè«‹è¬¹æ…ä½¿ç”¨
2. **ID è¡çª**: åŒæ­¥éç¨‹ä¸­æœƒä¿æŒåŸå§‹ IDï¼Œç¢ºä¿é—œè¯é—œä¿‚æ­£ç¢º
3. **ç’°å¢ƒè®Šæ•¸**: ç¢ºèª `.env.local` æª”æ¡ˆè¨­å®šæ­£ç¢º
4. **ç¶²è·¯é€£æ¥**: åŒæ­¥æ“ä½œéœ€è¦ç©©å®šçš„ç¶²è·¯é€£æ¥åˆ° Neon è³‡æ–™åº«

## ğŸ†˜ æ•…éšœæ’é™¤

### æœ¬åœ°è³‡æ–™åº«ä¸å­˜åœ¨
```bash
npm run db:reset:local
```

### Neon é€£æ¥å¤±æ•—
- æª¢æŸ¥ç¶²è·¯é€£æ¥
- ç¢ºèª DATABASE_URL è¨­å®šæ­£ç¢º
- æª¢æŸ¥ Neon è³‡æ–™åº«ç‹€æ…‹

### åŒæ­¥å¤±æ•—
- åŸ·è¡Œ `npm run db:sync:status` æª¢æŸ¥ç‹€æ…‹
- æŸ¥çœ‹éŒ¯èª¤è¨Šæ¯
- å˜—è©¦é‡æ–°åˆå§‹åŒ–: `npm run db:reset:local`

## ğŸ“Š æ”¯æ´çš„è³‡æ–™è¡¨

åŒæ­¥å·¥å…·æ”¯æ´ä»¥ä¸‹æ‰€æœ‰è³‡æ–™è¡¨ï¼š
- Users (ç”¨æˆ¶)
- Products (å•†å“)  
- ProductImages (å•†å“åœ–ç‰‡)
- Orders (è¨‚å–®)
- OrderItems (è¨‚å–®é …ç›®)
- Reviews (è©•åƒ¹)
- Wishlists (é¡˜æœ›æ¸…å–®)
- Chats (èŠå¤©)
- Messages (è¨Šæ¯)
- Notifications (é€šçŸ¥)
- StockHistory (åº«å­˜æ­·å²)